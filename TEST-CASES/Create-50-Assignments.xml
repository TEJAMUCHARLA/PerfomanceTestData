<?xml version="1.0" encoding="UTF-8"?>
<con:testCase xmlns:con="http://eviware.com/soapui/config" id="832d5375-1434-44f8-97de-2463c3b71d1c" discardOkResults="false" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="Create 50 Assignments" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" zephyrTestName="" zephyrTestId="">
  <con:settings id="337fe865-f94a-4f69-9e3d-dddb1d9d35f8">
    <con:setting id="832d5375-1434-44f8-97de-2463c3b71d1cfileName">Create-50-Assignments</con:setting>
  </con:settings>
  <con:testStep type="datasource" name="CreateAssignment" id="c08a1d4d-2627-4be9-aafc-b9f5a8ce91f5">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:DataSourceStep">
      <con:dataSource type="Excel">
        <con:configuration>
          <file>${#Project#TestDataExcelFile}</file>
          <worksheet>CreateAssignment</worksheet>
          <cell>A143</cell>
          <ignoreEmpty>false</ignoreEmpty>
          <evaluateFormulas>false</evaluateFormulas>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>points</con:property>
      <con:property>isGraded</con:property>
      <con:property>attemptType</con:property>
      <con:property>isHighlightLateSubmission</con:property>
      <con:property>isBroadcastingRequired</con:property>
      <con:property>accessibleFromTimezone</con:property>
      <con:property>timeZoneOffset</con:property>
      <con:property>isForEveryOne</con:property>
      <con:property>isImmediateAvailable</con:property>
      <con:property>isUnlocked</con:property>
      <con:property>NoOfAttempts</con:property>
      <con:property>Remarks</con:property>
      <con:property>resourse type</con:property>
      <con:restartOnRun>true</con:restartOnRun>
      <con:stopDatasourceExhausted>false</con:stopDatasourceExhausted>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Test Case Test Data" id="7840748a-f56f-491c-9a82-767522a492bc">
    <con:settings/>
    <con:config>
      <script>import java.lang.*;
import java.util.Date
import java.util.Calendar
import java.util.TimeZone
import java.text.SimpleDateFormat





def now= new Date()
SimpleDateFormat currentDatePlusOn = new SimpleDateFormat("MMMdd_HHmmss")
def currenTime= currentDatePlusOn.format(new Date(now.getTime()))
log.info("TIME NOW "+currenTime)
currenTime ="_"+currenTime

def timeZoneOffset = context.expand( '${CreateAssignment#timeZoneOffset}' )
def accessibleFromTimezone = context.expand( '${CreateAssignment#accessibleFromTimezone}' )


testRunner.testCase.testSuite.project.setPropertyValue("CourseAssignmentCount","5") //Existimg resource types 9 , so 9*5+1 =54
testRunner.testCase.testSuite.project.setPropertyValue("TotalAssignments","50")//Assignment count for assertion
testRunner.testCase.testSuite.project.setPropertyValue("CreateCourseName","Performance Test Data 50 Assignments "+currenTime.toString())
testRunner.testCase.testSuite.project.setPropertyValue("CreateCourseTimeZone",accessibleFromTimezone.toString())
testRunner.testCase.testSuite.project.setPropertyValue("CreateCourseDueTimeInDays","120") //course dute time 4 months form current time
testRunner.testCase.testSuite.project.setPropertyValue("CreateAssignmentDueTimeInDays","100")//assignmnet dute time 3 months fomr current time
testRunner.testCase.testSuite.project.setPropertyValue("CreateAssignmentDueTimeInMilliSeconds","14400000")
testRunner.testCase.testSuite.project.setPropertyValue("CreateAssignmentTimeZone",accessibleFromTimezone.toString())
testRunner.testCase.testSuite.project.setPropertyValue("CreateAssignmentTimeZoneOffset",timeZoneOffset.toString())

def instructorUser= ""
def instructorPassword= ""

//testRunner.testCase.testSuite.project.setPropertyValue("InstructorEmial",instructorUser.toString())
//testRunner.testCase.testSuite.project.setPropertyValue("instructorPassword",instructorPassword.toString())

log.info("SetUpDone")</script>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay 3" id="c73c8105-46d8-47bd-8d7f-722dadf0947b">
    <con:settings/>
    <con:config>
      <delay>1000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Call Create Course" id="8aa67409-594b-493b-9706-c6838bcde10b">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" copyHttpSession="true" ignoreEmptyProperties="true">
      <con:targetTestCase>dd9042f9-36df-49e2-acb7-2e2389cb40ed</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>accessDate</con:name>
          <con:value>2023-04-17T10:08:23-05:00</con:value>
        </con:property>
        <con:property>
          <con:name>DueDate</con:name>
          <con:value>2023-05-15</con:value>
        </con:property>
        <con:property>
          <con:name>EffectiveDate</con:name>
          <con:value>2023-11-20T00:00:00.000Z</con:value>
        </con:property>
        <con:property>
          <con:name>ExpireDate</con:name>
          <con:value>2024-03-19T00:00:00.000Z</con:value>
        </con:property>
        <con:property>
          <con:name>tomorrow</con:name>
          <con:value>Tue, Apr 18 2023</con:value>
        </con:property>
        <con:property>
          <con:name>tomorrow2</con:name>
          <con:value>2023-04-18</con:value>
        </con:property>
        <con:property>
          <con:name>instructorUserId</con:name>
          <con:value>0345b785-ba3e-4b3a-9c6c-447101694d75</con:value>
        </con:property>
        <con:property>
          <con:name>numberOfAttempts</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>StudentenrollmentToken</con:name>
          <con:value>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2ODE4ODU5NjAsImp0aSI6IjAxZDNiYzFlLWJlMzMtNGNjOS04OGU3LWI4ZTcxMjMzNTNhNSIsImlhdCI6MTY4MTcxMzE2MCwiaXNzIjoiaHR0cHM6Ly9waG9lbml4LWNjbS50aGVwb2ludC5sd3cuY29tIiwibmJmIjoxNjgxNzEzMTYwLCJzdWIiOiI5ZTZlOGM1Ny02ODNlLTRjNTQtODkzMS00NDc0MDE1OWQ2ODUiLCJobHJwX2NjbSI6W3siciI6InMiLCJjcnMiOiJnU0VCUUJLRzk5SUIiLCJzZWMiOiJnU0VCUUJLRzk5SUJfc1NFQlFCS0dBMlIifV19.kKMRJHB4y0Tno_H-esNrWhe-RsUn8zHCmazkZhhKCgXyBFbLRWiD2zyGp5MOZCZbIW1WIlQg4CjosIPwQtw204mHb6iNohaZtznNKEaZ5_BbW3241Stf9E_xo2X9qBCl_zrYUpX1M4uR066aPvoD5d_hViNCAynUW7OXzK3nC4VgF9F6amwQSDrje6AeD8D8vLTw_kmFk9eGSkVvEWnd5ZssYCAzqyVdgadLGbFrWj2N3TOIPsEkgR3HoJ17Ipg_ZCAwBqrAiPG5WMqQsNbMexKeSeb2bMA5FQuasV9Qc3YK9aphsr4ER17HAAZ1F1GtO_gmaYBO8xKU11WX1_UDGx5Dt0cpeRM24oonRf4sGS-BIsWXCsG8fTyaYzfJajIv7xh-ibK5NYtp2fji4W1l9ErKyfMX8bh27B5TnSOPjKZQydo4bqRnpK6IeiSCKmhbi195Yzzzns9h3Zs0edCV70UnEnFPO23gHIM2tSjkk_HNUitc8rR3ErYXKQx_p3t4RyAYcP8dbqi0RdepDBYoyR8LtFpfF63PYKKSk9SD5ePpqcqyqfHDibuL_Onmn0q14sF5TkXmnFLrj15Bxx4dgJV6BwTwbc3n_I-y5unOB6nbSR2PwINbsueSx7hjmebMPzZJqUwCGeehUnvGvt5vMbMY1ofYglw1HxryhcCvgdo</con:value>
        </con:property>
        <con:property>
          <con:name>accessTime</con:name>
          <con:value>10:08 PM</con:value>
        </con:property>
        <con:property>
          <con:name>DueTime</con:name>
          <con:value>10:06 PM</con:value>
        </con:property>
        <con:property>
          <con:name>CourseSerialNumber</con:name>
          <con:value>421</con:value>
        </con:property>
        <con:property>
          <con:name>BarerToken</con:name>
          <con:value>Bearer NGJlYzA5N2FhNjc4Y2M0ODc0MmMzNmJlMTE2ZTgyNWU1OTYyMzBlODg0NzhiOGY5ZmFmNDBlZTE0NTFiMzdiOA</con:value>
        </con:property>
        <con:property>
          <con:name>CollectionQnID</con:name>
          <con:value>1500116843</con:value>
        </con:property>
        <con:property>
          <con:name>CourseName</con:name>
          <con:value>Performance Test Data 50 Assignments _Nov20_155909</con:value>
        </con:property>
        <con:property>
          <con:name>CourseId</con:name>
          <con:value>g11A5D32YNP</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>accessDate</con:entry>
        <con:entry>DueDate</con:entry>
        <con:entry>EffectiveDate</con:entry>
        <con:entry>ExpireDate</con:entry>
        <con:entry>tomorrow</con:entry>
        <con:entry>tomorrow2</con:entry>
        <con:entry>instructorUserId</con:entry>
        <con:entry>numberOfAttempts</con:entry>
        <con:entry>StudentenrollmentToken</con:entry>
        <con:entry>accessTime</con:entry>
        <con:entry>DueTime</con:entry>
        <con:entry>CourseSerialNumber</con:entry>
        <con:entry>BarerToken</con:entry>
        <con:entry>CollectionQnID</con:entry>
        <con:entry>CourseName</con:entry>
        <con:entry>CourseId</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay 2" id="72174805-57b3-4300-bca0-50cd5d0392dd">
    <con:settings/>
    <con:config>
      <delay>10000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Create Assignmnets" id="c9c32427-c09c-4188-be44-f5d7a86267a1">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" ignoreEmptyProperties="true">
      <con:targetTestCase>2b24812c-5789-4c7f-be73-d6534e814e6c</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>accessDate</con:name>
          <con:value>2023-11-20T05:29:50-05:00</con:value>
        </con:property>
        <con:property>
          <con:name>DueDate</con:name>
          <con:value>2024-02-28</con:value>
        </con:property>
        <con:property>
          <con:name>EffectiveDate</con:name>
          <con:value>2023-04-18T00:00:00.000Z</con:value>
        </con:property>
        <con:property>
          <con:name>ExpireDate</con:name>
          <con:value>2023-05-18T00:00:00.000Z</con:value>
        </con:property>
        <con:property>
          <con:name>tomorrow</con:name>
          <con:value>Tue, Apr 18 2023</con:value>
        </con:property>
        <con:property>
          <con:name>tomorrow2</con:name>
          <con:value>2023-04-18</con:value>
        </con:property>
        <con:property>
          <con:name>instructorUserId</con:name>
          <con:value>0345b785-ba3e-4b3a-9c6c-447101694d75</con:value>
        </con:property>
        <con:property>
          <con:name>numberOfAttempts</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>StudentenrollmentToken</con:name>
          <con:value>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2ODE4ODU5NjAsImp0aSI6IjAxZDNiYzFlLWJlMzMtNGNjOS04OGU3LWI4ZTcxMjMzNTNhNSIsImlhdCI6MTY4MTcxMzE2MCwiaXNzIjoiaHR0cHM6Ly9waG9lbml4LWNjbS50aGVwb2ludC5sd3cuY29tIiwibmJmIjoxNjgxNzEzMTYwLCJzdWIiOiI5ZTZlOGM1Ny02ODNlLTRjNTQtODkzMS00NDc0MDE1OWQ2ODUiLCJobHJwX2NjbSI6W3siciI6InMiLCJjcnMiOiJnU0VCUUJLRzk5SUIiLCJzZWMiOiJnU0VCUUJLRzk5SUJfc1NFQlFCS0dBMlIifV19.kKMRJHB4y0Tno_H-esNrWhe-RsUn8zHCmazkZhhKCgXyBFbLRWiD2zyGp5MOZCZbIW1WIlQg4CjosIPwQtw204mHb6iNohaZtznNKEaZ5_BbW3241Stf9E_xo2X9qBCl_zrYUpX1M4uR066aPvoD5d_hViNCAynUW7OXzK3nC4VgF9F6amwQSDrje6AeD8D8vLTw_kmFk9eGSkVvEWnd5ZssYCAzqyVdgadLGbFrWj2N3TOIPsEkgR3HoJ17Ipg_ZCAwBqrAiPG5WMqQsNbMexKeSeb2bMA5FQuasV9Qc3YK9aphsr4ER17HAAZ1F1GtO_gmaYBO8xKU11WX1_UDGx5Dt0cpeRM24oonRf4sGS-BIsWXCsG8fTyaYzfJajIv7xh-ibK5NYtp2fji4W1l9ErKyfMX8bh27B5TnSOPjKZQydo4bqRnpK6IeiSCKmhbi195Yzzzns9h3Zs0edCV70UnEnFPO23gHIM2tSjkk_HNUitc8rR3ErYXKQx_p3t4RyAYcP8dbqi0RdepDBYoyR8LtFpfF63PYKKSk9SD5ePpqcqyqfHDibuL_Onmn0q14sF5TkXmnFLrj15Bxx4dgJV6BwTwbc3n_I-y5unOB6nbSR2PwINbsueSx7hjmebMPzZJqUwCGeehUnvGvt5vMbMY1ofYglw1HxryhcCvgdo</con:value>
        </con:property>
        <con:property>
          <con:name>accessTime</con:name>
          <con:value>05:29 AM</con:value>
        </con:property>
        <con:property>
          <con:name>DueTime</con:name>
          <con:value>09:29 AM</con:value>
        </con:property>
        <con:property>
          <con:name>AssignedAssignmnetCount</con:name>
          <con:value>4</con:value>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>accessDate</con:entry>
        <con:entry>DueDate</con:entry>
        <con:entry>EffectiveDate</con:entry>
        <con:entry>ExpireDate</con:entry>
        <con:entry>tomorrow</con:entry>
        <con:entry>tomorrow2</con:entry>
        <con:entry>instructorUserId</con:entry>
        <con:entry>numberOfAttempts</con:entry>
        <con:entry>StudentenrollmentToken</con:entry>
        <con:entry>accessTime</con:entry>
        <con:entry>DueTime</con:entry>
        <con:entry>AssignedAssignmnetCount</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="datasource" name="Data Source Credetails" id="33d8cd7e-ab06-4d2c-826b-1a1f9ac7f044">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:DataSourceStep">
      <con:dataSource type="Excel">
        <con:configuration>
          <file>${#Project#TestDataExcelFile}</file>
          <worksheet>${#Project#DB_Data_ExcelSheetName}</worksheet>
          <cell>A2</cell>
          <ignoreEmpty>false</ignoreEmpty>
          <evaluateFormulas>false</evaluateFormulas>
        </con:configuration>
      </con:dataSource>
      <con:shared>true</con:shared>
      <con:restartShared>true</con:restartShared>
      <con:property>StudentUserEmail</con:property>
      <con:property>StudentPassword</con:property>
      <con:property>WitchSection</con:property>
      <con:startRow/>
      <con:endRow/>
      <con:recordsPerIteration>1</con:recordsPerIteration>
      <con:completeLastOperation>false</con:completeLastOperation>
      <con:trimValues>false</con:trimValues>
      <con:entitizeValues>false</con:entitizeValues>
      <con:restartOnRun>true</con:restartOnRun>
      <con:expandProperties>false</con:expandProperties>
      <con:stopDatasourceExhausted>false</con:stopDatasourceExhausted>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Set Credetails" id="cb5bf4e9-c002-4b9e-9b01-6a02a96dcbc8">
    <con:settings/>
    <con:config>
      <script>import groovy.json.JsonSlurper
import java.lang.*;

def studentUserEmail = context.expand( '${Data Source Credetails#StudentUserEmail}' )
def studentPassword = context.expand( '${Data Source Credetails#StudentPassword}' )


//testRunner.testCase.testSuite.project.setPropertyValue("StudnetEmail", "AutomationStudent08")
//testRunner.testCase.testSuite.project.setPropertyValue("StudentPassword", "Welcome001")

testRunner.testCase.testSuite.project.setPropertyValue("StudnetEmail", studentUserEmail)
testRunner.testCase.testSuite.project.setPropertyValue("StudentPassword", studentPassword)


def witchSection = context.expand( '${Data Source Credetails#WitchSection}' )

def data = "\${#Project#Section"+witchSection.toString()+"Password}"
/*
if(witchSection.toString()=="1")
{
	def section1Password = context.expand( '${#Project#Section1Password}' )
}
else if(witchSection.toString()=="2")
{
	def section1Password = context.expand( '${#Project#Section1Password}' )
}
*/

def section1Password = context.expand( data )
log.info("password "+section1Password)
testRunner.testCase.testSuite.project.setPropertyValue("StudentJoinPassword", section1Password)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="GetAccessTokenStudent1" id="ef98fffa-74c4-43e2-aa22-f5d644f13964">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" service="Auth API" resourcePath="/Authentication/UsernameInSso" methodName="Method 1" xsi:type="con:RestRequestStep">
      <con:restRequest name="GetAccessTokenStudent1" id="7a8b79ab-de89-4998-ba4f-b6708ff27d44" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting>
        </con:settings>
        <con:endpoint>https://preprod-sso.hlrpbooks.com</con:endpoint>
        <con:request>{
  "Email": "${#Project#StudnetEmail}",
  "Password": "${#Project#StudentPassword}",
  "PostbackUrlOnSuccess": "${#Project#PostbackUrlOnSuccess}",
  "SiteId": "${#Project#SystemId}",
  "StaySignIn": false,
    "UrlToRedirectOnSuccess": "${#Project#UrlToRedirectOnSuccess}",
  "Timestamp": "2022-10-04T05:23:53.382Z",
  "SourceUrl": "${#Project#SourceUrl}",
  "AccessCode": "",
  "SiteInfoType": "Education",
  "WorkflowId": ""
}</con:request>
        <con:originalUri>https://preprod-sso.hlrpbooks.com/Authentication/UsernameInSso</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="1de409a2-83ad-4119-9963-7a2d299ce263" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="32a7ec59-9333-4c75-89de-3863fec4fa2c" name="Response SLA">
          <con:configuration>
            <SLA>${SLA}</SLA>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="7b97dea9-f6f0-473e-ae65-367e168d9ca7" name="Script Assertion">
          <con:configuration>
            <scriptText>import groovy.json.JsonSlurper
import java.lang.*;

def response = context.expand( '${GetAccessTokenStudent1#Response}' )


def verifyResponse = new JsonSlurper().parseText(response)
log.info(verifyResponse.Data.AuthenicationResult)

assert verifyResponse.Data.AuthenicationResult != null</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters/>
        <con:environmentSpec>
          <con:entry environmentId="5fdd3302-0f5d-4e97-86ac-499553156130">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="91a6eeff-dd67-4af8-98fd-225fe8ca80e2">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="6ce173f5-e51c-4b7f-9575-82621bb74596">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Wait for Access student" id="73fd3b5d-d134-41e8-a5bc-b66355922e65">
    <con:settings/>
    <con:config>
      <delay>${#Project#LoginDealy}</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Set Tokens Student1" id="0aa33f5f-b33b-4ad6-bd4e-e3f33ef56729">
    <con:settings/>
    <con:config>
      <script><![CDATA[import groovy.json.JsonSlurper
import java.lang.*;
def response = context.expand( '${GetAccessTokenStudent1#Response}' )

def resp = new JsonSlurper().parseText(response)

def start = resp.Data.AuthenicationResult.indexOf("<AccessToken>")+13;
def end = resp.Data.AuthenicationResult.indexOf("</AccessToken>");
def xaccesstoken = resp.Data.AuthenicationResult.substring(start, end);
//result["xaccessTokenStudent"]=xaccesstoken

def ssostart = resp.Data.AuthenicationResult.indexOf("<TokenKey>")+10;
def ssoend = resp.Data.AuthenicationResult.indexOf("</TokenKey>");
def ssotoken = resp.Data.AuthenicationResult.substring(ssostart, ssoend);
//result["ssoStudent"]=ssotoken

def IDstart = resp.Data.AuthenicationResult.indexOf("<UserId>")+8;
def IDend = resp.Data.AuthenicationResult.indexOf("</UserId>");
def StudentId = resp.Data.AuthenicationResult.substring(IDstart, IDend);


testRunner.testCase.testSuite.project.setPropertyValue("StudentUserId", StudentId)
testRunner.testCase.testSuite.project.setPropertyValue("xaccessTokenStudent", xaccesstoken)
testRunner.testCase.testSuite.project.setPropertyValue("ssoStudent", ssotoken)

log.info("StudentUserId = "+ StudentId)
log.info("xaccessTokenStudent =  " + xaccesstoken)
log.info("ssoStudent = "+ssotoken)]]></script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Loacte course in student join" id="3905c5d5-5b16-48f2-816b-7da7d6e3a75e">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" service="Student Search Course" resourcePath="/api/class-management/v2/class-wrapper/search/passcode/{Password}" methodName="Method 1" xsi:type="con:RestRequestStep">
      <con:restRequest name="Loacte course in student join" id="481ffffb-0c31-49cf-b198-cc533d483980" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment>&lt;con:entry key="${#Project#Key_ssoStudent}" value="${#Project#ssoStudent}" xmlns:con="http://eviware.com/soapui/config"/>&lt;con:entry key="${#Project#Key_xaccessTokenStudent}" value="${#Project#xaccessTokenStudent}" xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></con:setting>
        </con:settings>
        <con:request/>
        <con:originalUri>https://contentqa01-ccm.hlrpphoenix.com/api/class-management/v2/class-wrapper/search/passcode/</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="82ba8780-1ade-4633-9729-3d67b0db9a56" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>201</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="52a32018-748b-4575-b14a-52aa15f38cae" name="Response SLA">
          <con:configuration>
            <SLA>${SLA}</SLA>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="d8338b4d-feef-4344-a50a-c85abb5fcf52" name="Script Assertion" disabled="true">
          <con:configuration>
            <scriptText>import groovy.json.JsonSlurper
import java.lang.*;
def response222 = context.expand( '${Create course#Response}' )

def rawRequest = context.expand( '${Create course#RawRequest}' )

def  responsedata= context.expand( '${Loacte course in student join#Response}' )

def  rawRequestData= new JsonSlurper().parseText(rawRequest)
def response = new JsonSlurper().parseText(responsedata)
def response22 = new JsonSlurper().parseText(response222)

assert response.message =="Passcode search completed."
assert response.data.id  == response22.sectionId
assert response.data.name == rawRequestData.sectionName
assert response.data.number == rawRequestData.number
assert response.data.products.isbn  == rawRequestData.products
assert response.data.academicTerm  == rawRequestData.academicTerm
assert response.data.academicYear  == rawRequestData.academicYear
assert response.data.state=="ACTIVE"
assert response.data.instructors !=null
assert response.data.instructors[0].userId == rawRequestData.instructor
assert response.data.courseId  == response22.id
assert response.data.courseName  == rawRequestData.name
assert response.data.timeZoneId == rawRequestData.timeZoneId
assert response.data.sfdcAccountId  == rawRequestData.sfdcAccountId
assert response.data.programTypeId  == rawRequestData.programTypeId

assert response.data.startDate.toString().substring(0,response.data.startDate.toString().size()-1) == rawRequestData.startDate.toString().substring(0,rawRequestData.startDate.toString().size()-5)

assert response.data.endDate.toString().substring(0,response.data.endDate.toString().size()-1) == rawRequestData.endDate.toString().substring(0,rawRequestData.endDate.toString().size()-5)</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters>
          <con:entry key="Password" value="${#Project#StudentJoinPassword}"/>
        </con:parameters>
        <con:parameterOrder>
          <con:entry>Password</con:entry>
        </con:parameterOrder>
        <con:environmentSpec>
          <con:entry environmentId="5fdd3302-0f5d-4e97-86ac-499553156130">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="91a6eeff-dd67-4af8-98fd-225fe8ca80e2">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="6ce173f5-e51c-4b7f-9575-82621bb74596">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="groovy" name="Groovy Script 2" id="17a4cc2a-3c78-4071-b2a0-7727af8f23c8">
    <con:settings/>
    <con:config>
      <script>import groovy.json.JsonSlurper
import java.lang.*;

def response = context.expand( '${Loacte course in student join#Response#$[\'data\'][\'id\']}' )

log.info(response)
testRunner.testCase.testSuite.project.setPropertyValue("JoinedSectionid", response)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Student join a course" id="600a54ac-3cb3-4bc7-922e-1b91e70b3408">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" service="Student Join Course" resourcePath="/api/ccm/v2/private/user/enrollment" methodName="Method 1" xsi:type="con:RestRequestStep">
      <con:restRequest name="Student join a course" id="121a8d27-235a-4523-b0de-29d285db07f0" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment>&lt;con:entry key="${#Project#Key_ssoStudent}" value="${#Project#ssoStudent}" xmlns:con="http://eviware.com/soapui/config"/>&lt;con:entry key="${#Project#Key_xaccessTokenStudent}" value="${#Project#xaccessTokenStudent}" xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></con:setting>
        </con:settings>
        <con:request>{
  "id": "${Loacte course in student join#Response#$['data']['id']}",
  "role": "STUDENT",
  "status": "ACTIVE"
}</con:request>
        <con:originalUri>https://contentqa01-ccm.hlrpphoenix.com/api/ccm/v2/private/user/enrollment</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="8a6050a3-5f0c-4a36-8005-d97bb006323e" name="Valid HTTP Status Codes">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="6deda5a2-b3c7-49a7-873a-2b58dbed9bc9" name="Response SLA">
          <con:configuration>
            <SLA>${SLA}</SLA>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="ae524d2f-124b-46a5-891f-f58810d4aaf0" name="Script Assertion">
          <con:configuration>
            <scriptText>import groovy.json.JsonSlurper
import java.lang.*;
def response = context.expand( '${Student join a course#Response}' )

def verifyResponse = new JsonSlurper().parseText(response)

assert verifyResponse.enrollmentToken != null</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters/>
        <con:environmentSpec>
          <con:entry environmentId="5fdd3302-0f5d-4e97-86ac-499553156130">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="91a6eeff-dd67-4af8-98fd-225fe8ca80e2">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="6ce173f5-e51c-4b7f-9575-82621bb74596">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:testStep type="delay" name="Delay" id="55dc6ce7-dc06-4310-9be6-2c99a23e1925" disabled="true">
    <con:settings/>
    <con:config>
      <delay>180000</delay>
    </con:config>
  </con:testStep>
  <con:testStep type="calltestcase" name="Attempt" id="83f061e8-19fe-4ad3-b661-0d408b4fe54f" disabled="true">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" ignoreEmptyProperties="true">
      <con:targetTestCase>c176387a-a004-4893-a839-30608d68cbb1</con:targetTestCase>
      <con:properties>
        <con:property>
          <con:name>accessDate</con:name>
          <con:value>2023-04-18T06:11:52-05:00</con:value>
        </con:property>
        <con:property>
          <con:name>DueDate</con:name>
          <con:value>2023-04-18</con:value>
        </con:property>
        <con:property>
          <con:name>EffectiveDate</con:name>
          <con:value>2023-04-18T00:00:00.000Z</con:value>
        </con:property>
        <con:property>
          <con:name>ExpireDate</con:name>
          <con:value>2023-05-18T00:00:00.000Z</con:value>
        </con:property>
        <con:property>
          <con:name>tomorrow</con:name>
          <con:value>Tue, Apr 18 2023</con:value>
        </con:property>
        <con:property>
          <con:name>tomorrow2</con:name>
          <con:value>2023-04-18</con:value>
        </con:property>
        <con:property>
          <con:name>instructorUserId</con:name>
          <con:value>0345b785-ba3e-4b3a-9c6c-447101694d75</con:value>
        </con:property>
        <con:property>
          <con:name>numberOfAttempts</con:name>
          <con:value>1</con:value>
        </con:property>
        <con:property>
          <con:name>StudentenrollmentToken</con:name>
          <con:value>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2ODE4ODU5NjAsImp0aSI6IjAxZDNiYzFlLWJlMzMtNGNjOS04OGU3LWI4ZTcxMjMzNTNhNSIsImlhdCI6MTY4MTcxMzE2MCwiaXNzIjoiaHR0cHM6Ly9waG9lbml4LWNjbS50aGVwb2ludC5sd3cuY29tIiwibmJmIjoxNjgxNzEzMTYwLCJzdWIiOiI5ZTZlOGM1Ny02ODNlLTRjNTQtODkzMS00NDc0MDE1OWQ2ODUiLCJobHJwX2NjbSI6W3siciI6InMiLCJjcnMiOiJnU0VCUUJLRzk5SUIiLCJzZWMiOiJnU0VCUUJLRzk5SUJfc1NFQlFCS0dBMlIifV19.kKMRJHB4y0Tno_H-esNrWhe-RsUn8zHCmazkZhhKCgXyBFbLRWiD2zyGp5MOZCZbIW1WIlQg4CjosIPwQtw204mHb6iNohaZtznNKEaZ5_BbW3241Stf9E_xo2X9qBCl_zrYUpX1M4uR066aPvoD5d_hViNCAynUW7OXzK3nC4VgF9F6amwQSDrje6AeD8D8vLTw_kmFk9eGSkVvEWnd5ZssYCAzqyVdgadLGbFrWj2N3TOIPsEkgR3HoJ17Ipg_ZCAwBqrAiPG5WMqQsNbMexKeSeb2bMA5FQuasV9Qc3YK9aphsr4ER17HAAZ1F1GtO_gmaYBO8xKU11WX1_UDGx5Dt0cpeRM24oonRf4sGS-BIsWXCsG8fTyaYzfJajIv7xh-ibK5NYtp2fji4W1l9ErKyfMX8bh27B5TnSOPjKZQydo4bqRnpK6IeiSCKmhbi195Yzzzns9h3Zs0edCV70UnEnFPO23gHIM2tSjkk_HNUitc8rR3ErYXKQx_p3t4RyAYcP8dbqi0RdepDBYoyR8LtFpfF63PYKKSk9SD5ePpqcqyqfHDibuL_Onmn0q14sF5TkXmnFLrj15Bxx4dgJV6BwTwbc3n_I-y5unOB6nbSR2PwINbsueSx7hjmebMPzZJqUwCGeehUnvGvt5vMbMY1ofYglw1HxryhcCvgdo</con:value>
        </con:property>
        <con:property>
          <con:name>accessTime</con:name>
          <con:value>06:11 AM</con:value>
        </con:property>
        <con:property>
          <con:name>DueTime</con:name>
          <con:value>06:11 AM</con:value>
        </con:property>
        <con:property>
          <con:name>startAt</con:name>
          <con:value>2023-05-10T03:48:48.605Z</con:value>
        </con:property>
        <con:property>
          <con:name>completedAt</con:name>
          <con:value>2023-05-10T03:51:51.605Z</con:value>
        </con:property>
        <con:property>
          <con:name>sentAt</con:name>
          <con:value>2023-05-10T03:52:52.605Z</con:value>
        </con:property>
        <con:property>
          <con:name>Assertid</con:name>
          <con:value>2309</con:value>
        </con:property>
        <con:property>
          <con:name>Loop</con:name>
          <con:value>36</con:value>
        </con:property>
        <con:property>
          <con:name>PrepuExternalPrepuId</con:name>
          <con:value>["1501200653", "1501200654", "1501200655", "1501200656", "1501200657", "1501200658", "1501200659", "1501200660", "1501200661", "1501200662", "1501200663", "1501200664"]</con:value>
        </con:property>
        <con:property>
          <con:name>PrepuTargetMasteryLevel</con:name>
          <con:value>["8", "8", "8", "8", "8", "8", "8", "8", "8", "8", "8", "8"]</con:value>
        </con:property>
        <con:property>
          <con:name>PrepuName</con:name>
          <con:value>["Acid-Base Balance", "Chapter 1: Professional Nursing Practice", "Behaviors / Addiction", "Chapter 2: Medical-Surgical Nursing", "Assessment", "Chapter 3: Health Education and Health Promotion", "Caring Interventions", "Chapter 4: Adult Health and Physical, Nutritional, and Cultural Assessment", "Cellular Regulation", "Chapter 5: Stress and Inflammatory Responses", "Clinical Decision Making / Clinical Judgment", "Chapter 6: Genetics and Genomics in Nursing"]</con:value>
        </con:property>
        <con:property>
          <con:name>PrePuCutOff</con:name>
          <con:value>11</con:value>
        </con:property>
        <con:property>
          <con:name>PrepuexternalAssetId</con:name>
          <con:value>["313", "15039", "317", "15040", "316", "15041", "319", "15042", "367", "15043", "321", "15044"]</con:value>
        </con:property>
        <con:property>
          <con:name>SubmittedAssignmentsCount</con:name>
          <con:value>0</con:value>
        </con:property>
        <con:property>
          <con:name>StatusCode</con:name>
        </con:property>
      </con:properties>
      <con:returnProperties>
        <con:entry>accessDate</con:entry>
        <con:entry>DueDate</con:entry>
        <con:entry>EffectiveDate</con:entry>
        <con:entry>ExpireDate</con:entry>
        <con:entry>tomorrow</con:entry>
        <con:entry>tomorrow2</con:entry>
        <con:entry>instructorUserId</con:entry>
        <con:entry>numberOfAttempts</con:entry>
        <con:entry>StudentenrollmentToken</con:entry>
        <con:entry>accessTime</con:entry>
        <con:entry>DueTime</con:entry>
        <con:entry>startAt</con:entry>
        <con:entry>completedAt</con:entry>
        <con:entry>sentAt</con:entry>
        <con:entry>Assertid</con:entry>
        <con:entry>Loop</con:entry>
        <con:entry>PrepuExternalPrepuId</con:entry>
        <con:entry>PrepuTargetMasteryLevel</con:entry>
        <con:entry>PrepuName</con:entry>
        <con:entry>PrePuCutOff</con:entry>
        <con:entry>PrepuexternalAssetId</con:entry>
        <con:entry>SubmittedAssignmentsCount</con:entry>
      </con:returnProperties>
      <con:runMode>SINGLETON_AND_WAIT</con:runMode>
    </con:config>
  </con:testStep>
  <con:testStep type="datasourceloop" name="Data Source Loop" id="18269dce-8552-4c47-9dbc-d38bbbb642d4">
    <con:settings/>
    <con:config>
      <dataSourceStep>Data Source Credetails</dataSourceStep>
      <targetStep>Set Credetails</targetStep>
      <discardResults>false</discardResults>
    </con:config>
  </con:testStep>
  <con:properties/>
  <con:reportParameters/>
  <con:environmentSpec>
    <con:entry environmentId="6ce173f5-e51c-4b7f-9575-82621bb74596">
      <con:authProfile>Inherit From Parent</con:authProfile>
    </con:entry>
  </con:environmentSpec>
</con:testCase>
