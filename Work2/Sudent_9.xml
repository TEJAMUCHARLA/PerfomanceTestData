<?xml version="1.0" encoding="UTF-8"?>
<con:testCase xmlns:con="http://eviware.com/soapui/config" id="ed973a17-402f-4e87-bbd8-4a2bc5a31a79" discardOkResults="false" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="Sudent_9" searchProperties="true" timeout="0">
  <con:settings id="9954e355-c708-4ad8-abed-641ccabee9d7">
    <con:setting id="ed973a17-402f-4e87-bbd8-4a2bc5a31a79fileName">Sudent_9</con:setting>
  </con:settings>
  <con:testStep type="groovy" name="Groovy Script" id="b64b3059-f43b-4a7c-92e7-56e47ed1396b">
    <con:settings/>
    <con:config>
      <script>def final_Attempt_BodyData = context.expand( '${#TestSuite#Final_Attempt_BodyData}' )
def studentUserID = context.expand( '${#TestCase#StudentUserID}' )



final_Attempt_BodyData=final_Attempt_BodyData.toString().replace("DD_userId",studentUserID.toString())

testRunner.testCase.setPropertyValue("PushAttemptBody", final_Attempt_BodyData.toString())
def pushAttemptBody = context.expand( '${#TestCase#PushAttemptBody}' )

log.info("final_Attempt_BodyData "+pushAttemptBody)</script>
    </con:config>
  </con:testStep>
  <con:testStep type="restrequest" name="Push to SQS" id="0c6d9447-33ef-42f9-929f-f7a16b8f1910">
    <con:settings/>
    <con:config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" service="pushSQS" methodName="Method 1" resourcePath="/api/gradebook-process-management/v1/pushSqsQueue" xsi:type="con:RestRequestStep">
      <con:restRequest name="Push to SQS" id="0356f71d-de87-4d0e-8c1b-3c08512d544b" mediaType="application/json" postQueryString="false">
        <con:settings>
          <con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;con:entry key="${#Project#Key_xaccessTokenStudent}" value="${#Project#xaccessTokenStudent}" xmlns:con="http://eviware.com/soapui/config"/></con:setting>
        </con:settings>
        <con:encoding>UTF-8</con:encoding>
        <con:request>${#TestCase#PushAttemptBody}</con:request>
        <con:originalUri>https://contentqa01-ccm.hlrpphoenix.com/api/gradebook-process-management/v1/pushSqsQueue</con:originalUri>
        <con:assertion type="Valid HTTP Status Codes" id="26163957-cf3c-4bf9-9928-2bef78e226f8" name="Valid HTTP Status Codes" disabled="true">
          <con:settings/>
          <con:configuration>
            <codes>200</codes>
          </con:configuration>
        </con:assertion>
        <con:assertion type="Response SLA Assertion" id="a9854fe8-1173-41fd-83b1-cb912fb39936" name="Response SLA">
          <con:configuration>
            <SLA>${SLA}</SLA>
          </con:configuration>
        </con:assertion>
        <con:assertion type="GroovyScriptAssertion" id="78cd09dc-2a8a-4a7b-86db-4af23e0edc94" name="Script Assertion">
          <con:configuration>
            <scriptText>import groovy.json.JsonSlurper
import java.lang.*;

def testCase = messageExchange.modelItem.testCase;
def rawRequest = context.expand( '${Push to SQS#RawRequest#$[\'activityId\']}' )

def response = context.expand( '${Push to SQS#Response#$[\'code\']}' )


if(rawRequest.toString()=="")
{
	
	assert response.toString()=="400"
	testCase.setPropertyValue("StatusCode","400")
}
else
{
	assert response.toString()==""
	testCase.setPropertyValue("StatusCode","200")
}</scriptText>
          </con:configuration>
        </con:assertion>
        <con:credentials>
          <con:selectedAuthProfile>No Authorization</con:selectedAuthProfile>
          <con:authType>No Authorization</con:authType>
        </con:credentials>
        <con:jmsConfig JMSDeliveryMode="PERSISTENT"/>
        <con:parameters/>
        <con:environmentSpec>
          <con:entry environmentId="5fdd3302-0f5d-4e97-86ac-499553156130">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="91a6eeff-dd67-4af8-98fd-225fe8ca80e2">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="84a8c881-bb29-487a-93b8-3f2e674fb825">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
          <con:entry environmentId="6ce173f5-e51c-4b7f-9575-82621bb74596">
            <con:authProfile>Inherit From Parent</con:authProfile>
          </con:entry>
        </con:environmentSpec>
      </con:restRequest>
    </con:config>
  </con:testStep>
  <con:properties>
    <con:property>
      <con:name>PushAttemptBody</con:name>
      <con:value>{"id":"17064369","meta":{"quizId":340714,"quizTime":"1800 seconds","quizVersion":1,"totalCorrect":2,"totalAnswered":10,"totalIncorrect":8,"totalQuestions":10,"totalTimeSpent":"38 seconds","totalUnattempted":0},"productId":null,"type":"Scored","startedAt":"2023-11-21T12:18:18.605Z","completedAt":"2023-11-21T12:20:20.605Z","sentAt":"2023-11-21T12:21:21.605Z","userId":"8231c09e-60a6-4f2d-be1b-460900960b9a","systemId":"3c39846c-886a-df11-b115-005056c00008","activityId":"CP4_QuizManager_614fdc4b4dad2","correlationId":"567560568404180992","score":"50","classIds":["g111T34DHF7NC_s111T34DHGM7S"]}</con:value>
    </con:property>
    <con:property>
      <con:name>xaccessTokenStudent</con:name>
      <con:value>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzc28ud2tocGUuY29tIiwiYXVkIjoiM2MzOTg0NmMtODg2YS1kZjExLWIxMTUtMDA1MDU2YzAwMDA4IiwiYXV0aF90aW1lIjoxNzAwNTY4NTc2LCJuYW1lIjoiUGVyZm9ybWFuY2UgU3R1ZGVudDExMTkiLCJqdGkiOiJmMTQ0OWQzYS1hNWFhLTQ2M2EtYjNmYy1kYjE3MmVmN2MxY2IiLCJpYXQiOjE3MDA1Njg1NzYsImV4cCI6MTcwMDY1NDk3Niwic3ViIjoiODIzMWMwOWUtNjBhNi00ZjJkLWJlMWItNDYwOTAwOTYwYjlhIiwicm9sZXMiOiJ3a2hwZS1lbmQgdXNlciIsIndraHBlX3Blcm1pc3Npb25zIjpbIkNhblVzZVBlcnNvbmFsaXphdGlvbkZlYXR1cmVzIl0sIndraHBlX3Rva2VuIjoiVTdTV3VueDNrSUtoVnRRVXhMVUVOZnJhTzVodnZybHpEcjBlVnk3cVBQOUhsb1Z4d0JmUENDODMxRTBjSWk5U0Jqc2lYcHBMR2dsOFg2M3R6QW1sMDNIUGhUelk3NVVuMUJHKy9BSHRUYno2UjlIc2VFRXBwTEJCQjk3cGMwejl5UkJFWDFkSXAwSzBWUUV1QmhONldySy9mQUwzNUJiaHpqRVdyME9RdFgzSy8wV2JxSjZjYnRCa1puV0hpYkR6YzZVOU9vK1A2cDVacXFab1FLZDcyTVA4Y3Z0VW90bndGRTFucklYZXluRnpwVDA2ajQvcW5sbXFwbWhBcDN2WW5ZWnYwYlpROXZmK2xlSUdHTkIrYktYOG5XU3NXOW9YIiwidG9rZW5fdHlwZSI6ImJlYXJlciJ9.Dh9XBt2CSwoetiT-hAm5rA_9Uu1weG97hCIxD4ktECDW541xT87-rM5hCx6trPpA9KH-jKoJClVvzoqw7bXihpHO9P_AVahu70t8OGvNBrOLDifm5WQWmQoowHcYzJZdBV3ePwnFW7yoVnKclxXpNg5KSsT-yLgUHqEK0TlTpk8</con:value>
    </con:property>
    <con:property>
      <con:name>StudentUserID</con:name>
      <con:value>8231c09e-60a6-4f2d-be1b-460900960b9a</con:value>
    </con:property>
    <con:property>
      <con:name>StatusCode</con:name>
      <con:value>200</con:value>
    </con:property>
  </con:properties>
  <con:reportParameters/>
</con:testCase>
